import type {
  CaseRecord,
  IDPEntity,
  PolicyEntity,
  WorkflowEvent,
  CaseDocument,
  TransactionTypeConfig,
  DecisionTable,
  GoodOrderCheck,
  EntityField,
} from '../types/entities';

// ─── Transaction Type Registry ─────────────────────────────────────────────────
export const TRANSACTION_TYPE_REGISTRY: TransactionTypeConfig[] = [
  {
    key: 'LIFE_LOAN',
    displayName: 'Policy Loan Request',
    lineOfBusiness: 'Life',
    idpTemplateRef: 'IDP_TMPL_LOAN_V2',
    decisionTableRef: 'DT_LOAN_TRIAGE_V1',
    formLayoutRef: 'LAYOUT_LOAN_FIELDS',
    goodOrderChecklistRef: 'GOC_LOAN_STANDARD',
    confidenceThresholds: { default: 90, signature: 95, amounts: 85 },
  },
  {
    key: 'ANNUITY_WITHDRAWAL',
    displayName: 'Annuity Single Withdrawal',
    lineOfBusiness: 'Annuity',
    idpTemplateRef: 'IDP_TMPL_ANNUITY_WD_V1',
    decisionTableRef: 'DT_WITHDRAWAL_TRIAGE_V1',
    formLayoutRef: 'LAYOUT_WITHDRAWAL_FIELDS',
    goodOrderChecklistRef: 'GOC_WITHDRAWAL_STANDARD',
    confidenceThresholds: { default: 90, signature: 95, amounts: 85 },
  },
  {
    key: 'LIFE_FULL_SURRENDER',
    displayName: 'Full Surrender',
    lineOfBusiness: 'Life / Annuity',
    idpTemplateRef: 'IDP_TMPL_SURRENDER_V1',
    decisionTableRef: 'DT_SURRENDER_TRIAGE_V1',
    formLayoutRef: 'LAYOUT_SURRENDER_FIELDS',
    goodOrderChecklistRef: 'GOC_SURRENDER_STANDARD',
    confidenceThresholds: { default: 90, signature: 95, amounts: 85 },
  },
  {
    key: 'ANNUITY_RMD',
    displayName: 'Annuity RMD Distribution',
    lineOfBusiness: 'Annuity',
    idpTemplateRef: 'IDP_TMPL_RMD_V1',
    decisionTableRef: 'DT_RMD_TRIAGE_V1',
    formLayoutRef: 'LAYOUT_RMD_FIELDS',
    goodOrderChecklistRef: 'GOC_RMD_STANDARD',
    confidenceThresholds: { default: 90, signature: 95, amounts: 85 },
  },
  {
    key: 'LIFE_PARTIAL_SURRENDER',
    displayName: 'Partial Surrender',
    lineOfBusiness: 'Life / Annuity',
    idpTemplateRef: 'IDP_TMPL_PARTIAL_SURRENDER_V1',
    decisionTableRef: 'DT_PARTIAL_SURRENDER_TRIAGE_V1',
    formLayoutRef: 'LAYOUT_PARTIAL_SURRENDER_FIELDS',
    goodOrderChecklistRef: 'GOC_PARTIAL_SURRENDER_STANDARD',
    confidenceThresholds: { default: 90, signature: 95, amounts: 85 },
  },
];

// ─── Demo Scenario 1: Policy Loan (Moderate Touch) ────────────────────────────
export const LOAN_CASE: CaseRecord = {
  id: 'CSE-2026-010847',
  policyNumber: 'LF-2024-089423',
  ownerName: 'James R. Whitfield',
  transactionType: 'Policy Loan Request',
  transactionTypeKey: 'LIFE_LOAN',
  channelSource: 'Mail / Fax',
  status: 'PENDING_VALIDATION',
  createdAt: '2026-02-20T09:14:32Z',
};

export const LOAN_IDP_ENTITIES: IDPEntity[] = [
  // Identity Group
  {
    fieldName: 'owner_name',
    displayName: 'Owner Name',
    extractedValue: 'James R. Whitfield',
    confidenceScore: 98,
    validated: false,
    corrected: false,
    matchStatus: 'match',
    policyValue: 'James R. Whitfield',
    group: 'identity',
    required: true,
  },
  {
    fieldName: 'policy_number',
    displayName: 'Policy Number',
    extractedValue: 'LF-2024-089423',
    confidenceScore: 99,
    validated: false,
    corrected: false,
    matchStatus: 'match',
    policyValue: 'LF-2024-089423',
    group: 'identity',
    required: true,
  },
  {
    fieldName: 'owner_ssn_last4',
    displayName: 'SSN (Last 4)',
    extractedValue: '7823',
    confidenceScore: 94,
    validated: false,
    corrected: false,
    matchStatus: 'match',
    policyValue: '7823',
    group: 'identity',
    required: true,
  },
  {
    fieldName: 'owner_address',
    displayName: 'Mailing Address',
    extractedValue: '1842 Oakridge Drive, Atlanta, GA 30301',
    confidenceScore: 87,
    validated: false,
    corrected: false,
    matchStatus: 'mismatch',
    policyValue: '1842 Oakridge Dr, Atlanta, GA 30301',
    group: 'identity',
    required: false,
  },
  {
    fieldName: 'owner_signature',
    displayName: 'Owner Signature',
    extractedValue: 'Present',
    confidenceScore: 91,
    validated: false,
    corrected: false,
    matchStatus: 'match',
    group: 'identity',
    required: true,
  },
  {
    fieldName: 'date_signed',
    displayName: 'Date Signed',
    extractedValue: '02/18/2026',
    confidenceScore: 97,
    validated: false,
    corrected: false,
    matchStatus: 'unavailable',
    group: 'identity',
    required: true,
  },
  // Financial Group
  {
    fieldName: 'requested_amount',
    displayName: 'Requested Loan Amount',
    extractedValue: '$75,000.00',
    confidenceScore: 92,
    validated: false,
    corrected: false,
    matchStatus: 'pending',
    group: 'financial',
    required: true,
  },
  {
    fieldName: 'loan_type',
    displayName: 'Loan Type',
    extractedValue: 'New Loan',
    confidenceScore: 96,
    validated: false,
    corrected: false,
    matchStatus: 'unavailable',
    group: 'financial',
    required: true,
  },
  // Payment Group
  {
    fieldName: 'payment_method',
    displayName: 'Disbursement Method',
    extractedValue: 'EFT — Checking',
    confidenceScore: 88,
    validated: false,
    corrected: false,
    matchStatus: 'unavailable',
    group: 'payment',
    required: true,
  },
  {
    fieldName: 'bank_routing',
    displayName: 'Bank Routing Number',
    extractedValue: '021000089',
    confidenceScore: 83,
    validated: false,
    corrected: false,
    matchStatus: 'unavailable',
    group: 'payment',
    required: true,
  },
  {
    fieldName: 'bank_account',
    displayName: 'Bank Account Number',
    extractedValue: '****4491',
    confidenceScore: 85,
    validated: false,
    corrected: false,
    matchStatus: 'unavailable',
    group: 'payment',
    required: true,
  },
  // Tax Group
  {
    fieldName: 'tax_withholding_federal',
    displayName: 'Federal Withholding Election',
    extractedValue: '10%',
    confidenceScore: 79,
    validated: false,
    corrected: false,
    matchStatus: 'unavailable',
    group: 'tax',
    required: true,
  },
  {
    fieldName: 'tax_withholding_state',
    displayName: 'State Withholding Election',
    extractedValue: 'Exempt',
    confidenceScore: 72,
    validated: false,
    corrected: false,
    matchStatus: 'unavailable',
    group: 'tax',
    required: false,
  },
];

export const LOAN_POLICY_ENTITIES: PolicyEntity[] = [
  {
    fieldName: 'policy_status',
    displayName: 'Policy Status',
    value: 'Active',
    retrievedAt: '2026-02-20T09:14:45Z',
    sourceSystem: 'Admin System',
    category: 'Status',
  },
  {
    fieldName: 'cash_surrender_value',
    displayName: 'Cash Surrender Value',
    value: '$120,000.00',
    retrievedAt: '2026-02-20T09:14:45Z',
    sourceSystem: 'Admin System',
    category: 'Financials',
  },
  {
    fieldName: 'existing_loan_balance',
    displayName: 'Existing Loan Balance',
    value: '$10,000.00',
    retrievedAt: '2026-02-20T09:14:45Z',
    sourceSystem: 'Admin System',
    category: 'Financials',
  },
  {
    fieldName: 'max_loan_available',
    displayName: 'Maximum Loan Available',
    value: '$110,000.00',
    retrievedAt: '2026-02-20T09:14:45Z',
    sourceSystem: 'Admin System',
    category: 'Financials',
  },
  {
    fieldName: 'loan_interest_rate',
    displayName: 'Loan Interest Rate',
    value: '5.50%',
    retrievedAt: '2026-02-20T09:14:45Z',
    sourceSystem: 'Admin System',
    category: 'Financials',
  },
  {
    fieldName: 'policy_issue_date',
    displayName: 'Policy Issue Date',
    value: '03/15/2008',
    retrievedAt: '2026-02-20T09:14:45Z',
    sourceSystem: 'Admin System',
    category: 'Policy Details',
  },
  {
    fieldName: 'tax_qualification',
    displayName: 'Tax Qualification',
    value: 'Non-Qualified',
    retrievedAt: '2026-02-20T09:14:45Z',
    sourceSystem: 'Admin System',
    category: 'Tax',
  },
  {
    fieldName: 'owner_name_policy',
    displayName: 'Owner Name (System)',
    value: 'James R. Whitfield',
    retrievedAt: '2026-02-20T09:14:45Z',
    sourceSystem: 'Admin System',
    category: 'Identity',
  },
  {
    fieldName: 'owner_dob',
    displayName: 'Owner Date of Birth',
    value: '09/12/1962',
    retrievedAt: '2026-02-20T09:14:45Z',
    sourceSystem: 'Admin System',
    category: 'Identity',
  },
];

export const LOAN_WORKFLOW_EVENTS: WorkflowEvent[] = [
  {
    id: 'WE-001',
    eventType: 'CASE_CREATED',
    description: 'Case created from Mail/Fax intake channel',
    actor: 'System',
    timestamp: '2026-02-20T09:14:32Z',
  },
  {
    id: 'WE-002',
    eventType: 'DOCUMENT_RECEIVED',
    description: 'Loan request form received — 2 pages',
    actor: 'System',
    timestamp: '2026-02-20T09:14:33Z',
  },
  {
    id: 'WE-003',
    eventType: 'IDP_QUEUED',
    description: 'Document queued for IDP extraction — Template: IDP_TMPL_LOAN_V2',
    actor: 'System',
    timestamp: '2026-02-20T09:14:34Z',
  },
  {
    id: 'WE-004',
    eventType: 'IDP_COMPLETE',
    description: 'IDP extraction complete — 13 fields extracted, 4 below confidence threshold',
    actor: 'Assure IDP Service',
    timestamp: '2026-02-20T09:15:12Z',
  },
  {
    id: 'WE-005',
    eventType: 'POLICY_DATA_RETRIEVED',
    description: 'Policy data retrieved from Admin System — 9 fields loaded',
    actor: 'System',
    timestamp: '2026-02-20T09:15:14Z',
  },
];

export const LOAN_DOCUMENTS: CaseDocument[] = [
  {
    id: 'DOC-001',
    name: 'Loan_Request_Form_LF089423.pdf',
    type: 'Policy Loan Request',
    sizeMB: 1.2,
    uploadedAt: '2026-02-20T09:14:33Z',
    idpStatus: 'complete',
    pageCount: 2,
  },
  {
    id: 'DOC-002',
    name: 'Bank_Verification_Letter.pdf',
    type: 'Supporting Document',
    sizeMB: 0.4,
    uploadedAt: '2026-02-20T09:14:38Z',
    idpStatus: 'complete',
    pageCount: 1,
  },
];

export const LOAN_GOOD_ORDER_CHECKS: GoodOrderCheck[] = [
  {
    id: 'GOC-001',
    description: 'Policy is in Active status',
    status: 'pass',
    required: true,
    category: 'Eligibility',
  },
  {
    id: 'GOC-002',
    description: 'Requested amount does not exceed maximum loan available',
    status: 'pass',
    required: true,
    category: 'Financial Validation',
  },
  {
    id: 'GOC-003',
    description: 'Owner identity verified against policy records',
    status: 'pass',
    required: true,
    category: 'Identity',
  },
  {
    id: 'GOC-004',
    description: 'Owner signature present and dated within 90 days',
    status: 'pending',
    required: true,
    category: 'Signature',
  },
  {
    id: 'GOC-005',
    description: 'Valid disbursement method provided',
    status: 'pass',
    required: true,
    category: 'Payment',
  },
  {
    id: 'GOC-006',
    description: 'Tax withholding election present',
    status: 'pass',
    required: true,
    category: 'Tax',
  },
  {
    id: 'GOC-007',
    description: 'Bank account verified for EFT disbursement',
    status: 'pending',
    required: true,
    category: 'Payment',
    notes: 'Bank verification letter attached — requires manual review',
  },
];

// ─── Demo Scenario 2: Annuity Withdrawal (Low Touch) ──────────────────────────
export const WITHDRAWAL_CASE: CaseRecord = {
  id: 'CSE-2026-010891',
  policyNumber: 'ANN-2024-034891',
  ownerName: 'Patricia M. Chen',
  transactionType: 'Annuity Single Withdrawal',
  transactionTypeKey: 'ANNUITY_WITHDRAWAL',
  channelSource: 'Portal',
  status: 'PENDING_VALIDATION',
  createdAt: '2026-02-20T11:32:07Z',
};

export const WITHDRAWAL_IDP_ENTITIES: IDPEntity[] = [
  {
    fieldName: 'owner_name',
    displayName: 'Owner Name',
    extractedValue: 'Patricia M. Chen',
    confidenceScore: 99,
    validated: false,
    corrected: false,
    matchStatus: 'match',
    policyValue: 'Patricia M. Chen',
    group: 'identity',
    required: true,
  },
  {
    fieldName: 'policy_number',
    displayName: 'Contract Number',
    extractedValue: 'ANN-2024-034891',
    confidenceScore: 99,
    validated: false,
    corrected: false,
    matchStatus: 'match',
    policyValue: 'ANN-2024-034891',
    group: 'identity',
    required: true,
  },
  {
    fieldName: 'owner_signature',
    displayName: 'Owner Signature',
    extractedValue: 'Present',
    confidenceScore: 96,
    validated: false,
    corrected: false,
    matchStatus: 'match',
    group: 'identity',
    required: true,
  },
  {
    fieldName: 'date_signed',
    displayName: 'Date Signed',
    extractedValue: '02/19/2026',
    confidenceScore: 98,
    validated: false,
    corrected: false,
    matchStatus: 'unavailable',
    group: 'identity',
    required: true,
  },
  {
    fieldName: 'requested_amount',
    displayName: 'Withdrawal Amount',
    extractedValue: '$5,000.00',
    confidenceScore: 97,
    validated: false,
    corrected: false,
    matchStatus: 'pending',
    group: 'financial',
    required: true,
  },
  {
    fieldName: 'withdrawal_type',
    displayName: 'Withdrawal Type',
    extractedValue: 'Partial Withdrawal',
    confidenceScore: 98,
    validated: false,
    corrected: false,
    matchStatus: 'unavailable',
    group: 'financial',
    required: true,
  },
  {
    fieldName: 'payment_method',
    displayName: 'Disbursement Method',
    extractedValue: 'EFT — Checking',
    confidenceScore: 97,
    validated: false,
    corrected: false,
    matchStatus: 'unavailable',
    group: 'payment',
    required: true,
  },
  {
    fieldName: 'tax_withholding_federal',
    displayName: 'Federal Withholding Election',
    extractedValue: '10%',
    confidenceScore: 96,
    validated: false,
    corrected: false,
    matchStatus: 'unavailable',
    group: 'tax',
    required: true,
  },
];

export const WITHDRAWAL_POLICY_ENTITIES: PolicyEntity[] = [
  {
    fieldName: 'policy_status',
    displayName: 'Contract Status',
    value: 'Active',
    retrievedAt: '2026-02-20T11:32:15Z',
    sourceSystem: 'Admin System',
    category: 'Status',
  },
  {
    fieldName: 'account_value',
    displayName: 'Account Value',
    value: '$180,000.00',
    retrievedAt: '2026-02-20T11:32:15Z',
    sourceSystem: 'Admin System',
    category: 'Financials',
  },
  {
    fieldName: 'free_withdrawal_amount',
    displayName: 'Free Withdrawal Available',
    value: '$18,000.00',
    retrievedAt: '2026-02-20T11:32:15Z',
    sourceSystem: 'Admin System',
    category: 'Financials',
  },
  {
    fieldName: 'surrender_charge_rate',
    displayName: 'Surrender Charge Rate',
    value: '0% (Free Corridor)',
    retrievedAt: '2026-02-20T11:32:15Z',
    sourceSystem: 'Admin System',
    category: 'Financials',
  },
  {
    fieldName: 'surrender_charge_period',
    displayName: 'Surrender Charge Period Remaining',
    value: '3 years',
    retrievedAt: '2026-02-20T11:32:15Z',
    sourceSystem: 'Admin System',
    category: 'Financials',
  },
  {
    fieldName: 'tax_qualification',
    displayName: 'Tax Qualification',
    value: 'Non-Qualified',
    retrievedAt: '2026-02-20T11:32:15Z',
    sourceSystem: 'Admin System',
    category: 'Tax',
  },
  {
    fieldName: 'owner_name_policy',
    displayName: 'Owner Name (System)',
    value: 'Patricia M. Chen',
    retrievedAt: '2026-02-20T11:32:15Z',
    sourceSystem: 'Admin System',
    category: 'Identity',
  },
];

export const WITHDRAWAL_WORKFLOW_EVENTS: WorkflowEvent[] = [
  {
    id: 'WE-001',
    eventType: 'CASE_CREATED',
    description: 'Case created from Customer Portal self-service submission',
    actor: 'Portal (pchen)',
    timestamp: '2026-02-20T11:32:07Z',
  },
  {
    id: 'WE-002',
    eventType: 'DOCUMENT_RECEIVED',
    description: 'Withdrawal request form submitted digitally — 1 page',
    actor: 'Portal (pchen)',
    timestamp: '2026-02-20T11:32:07Z',
  },
  {
    id: 'WE-003',
    eventType: 'IDP_COMPLETE',
    description: 'IDP extraction complete — 8 fields extracted, 0 below confidence threshold',
    actor: 'Assure IDP Service',
    timestamp: '2026-02-20T11:32:22Z',
  },
  {
    id: 'WE-004',
    eventType: 'POLICY_DATA_RETRIEVED',
    description: 'Contract data retrieved from Admin System — 7 fields loaded',
    actor: 'System',
    timestamp: '2026-02-20T11:32:24Z',
  },
];

export const WITHDRAWAL_DOCUMENTS: CaseDocument[] = [
  {
    id: 'DOC-001',
    name: 'Withdrawal_Request_ANN034891.pdf',
    type: 'Annuity Withdrawal Request',
    sizeMB: 0.8,
    uploadedAt: '2026-02-20T11:32:07Z',
    idpStatus: 'complete',
    pageCount: 1,
  },
];

// ─── Decision Tables ──────────────────────────────────────────────────────────
export const LOAN_DECISION_TABLE: DecisionTable = {
  id: 'DT_LOAN_TRIAGE_V1',
  name: 'Policy Loan Triage Rules',
  transactionTypeKey: 'LIFE_LOAN',
  version: '1.0',
  status: 'active',
  columns: [
    {
      id: 'col_loan_pct',
      fieldName: 'loan_amount_pct_of_max',
      displayName: 'Loan Amt % of Max',
      entitySource: 'IDP',
      dataType: 'percent',
      unit: '%',
    },
    {
      id: 'col_policy_status',
      fieldName: 'policy_status',
      displayName: 'Policy Status',
      entitySource: 'Policy',
      dataType: 'string',
    },
    {
      id: 'col_idp_confidence',
      fieldName: 'idp_confidence_avg',
      displayName: 'IDP Confidence',
      entitySource: 'IDP',
      dataType: 'percent',
      unit: '%',
    },
    {
      id: 'col_existing_loan',
      fieldName: 'existing_loan_balance',
      displayName: 'Existing Loan',
      entitySource: 'Policy',
      dataType: 'string',
    },
  ],
  rules: [
    {
      id: 'RULE-001',
      order: 1,
      description: 'STP — Small loan, no prior balance, high confidence',
      conditions: [
        { id: 'c1', columnId: 'col_loan_pct', fieldName: 'loan_amount_pct_of_max', operator: 'lt', value: '50' },
        { id: 'c2', columnId: 'col_policy_status', fieldName: 'policy_status', operator: 'eq', value: 'Active' },
        { id: 'c3', columnId: 'col_idp_confidence', fieldName: 'idp_confidence_avg', operator: 'gt', value: '95' },
        { id: 'c4', columnId: 'col_existing_loan', fieldName: 'existing_loan_balance', operator: 'eq', value: 'None' },
      ],
      outputTouchLevel: 'STP',
      isDefault: false,
    },
    {
      id: 'RULE-002',
      order: 2,
      description: 'Low Touch — Moderate amount, active, high confidence, no prior loan',
      conditions: [
        { id: 'c5', columnId: 'col_loan_pct', fieldName: 'loan_amount_pct_of_max', operator: 'lt', value: '75' },
        { id: 'c6', columnId: 'col_policy_status', fieldName: 'policy_status', operator: 'eq', value: 'Active' },
        { id: 'c7', columnId: 'col_idp_confidence', fieldName: 'idp_confidence_avg', operator: 'gt', value: '90' },
        { id: 'c8', columnId: 'col_existing_loan', fieldName: 'existing_loan_balance', operator: 'eq', value: 'None' },
      ],
      outputTouchLevel: 'LOW',
      isDefault: false,
    },
    {
      id: 'RULE-003',
      order: 3,
      description: 'Moderate Touch — Standard amount range with active policy',
      conditions: [
        { id: 'c9', columnId: 'col_loan_pct', fieldName: 'loan_amount_pct_of_max', operator: 'lt', value: '90' },
        { id: 'c10', columnId: 'col_policy_status', fieldName: 'policy_status', operator: 'eq', value: 'Active' },
        { id: 'c11', columnId: 'col_idp_confidence', fieldName: 'idp_confidence_avg', operator: 'gt', value: '70' },
        { id: 'c12', columnId: 'col_existing_loan', fieldName: 'existing_loan_balance', operator: 'any', value: '' },
      ],
      outputTouchLevel: 'MODERATE',
      isDefault: false,
    },
    {
      id: 'RULE-004',
      order: 4,
      description: 'High Touch — Loan amount exceeds 90% of maximum available',
      conditions: [
        { id: 'c13', columnId: 'col_loan_pct', fieldName: 'loan_amount_pct_of_max', operator: 'gte', value: '90' },
        { id: 'c14', columnId: 'col_policy_status', fieldName: 'policy_status', operator: 'any', value: '' },
        { id: 'c15', columnId: 'col_idp_confidence', fieldName: 'idp_confidence_avg', operator: 'any', value: '' },
        { id: 'c16', columnId: 'col_existing_loan', fieldName: 'existing_loan_balance', operator: 'any', value: '' },
      ],
      outputTouchLevel: 'HIGH',
      isDefault: false,
    },
    {
      id: 'RULE-005',
      order: 5,
      description: 'High Touch — Policy not in active status',
      conditions: [
        { id: 'c17', columnId: 'col_loan_pct', fieldName: 'loan_amount_pct_of_max', operator: 'any', value: '' },
        { id: 'c18', columnId: 'col_policy_status', fieldName: 'policy_status', operator: 'neq', value: 'Active' },
        { id: 'c19', columnId: 'col_idp_confidence', fieldName: 'idp_confidence_avg', operator: 'any', value: '' },
        { id: 'c20', columnId: 'col_existing_loan', fieldName: 'existing_loan_balance', operator: 'any', value: '' },
      ],
      outputTouchLevel: 'HIGH',
      isDefault: false,
    },
    {
      id: 'RULE-DEFAULT',
      order: 6,
      description: 'Default — All other cases',
      conditions: [],
      outputTouchLevel: 'MODERATE',
      isDefault: true,
    },
  ],
};

export const WITHDRAWAL_DECISION_TABLE: DecisionTable = {
  id: 'DT_WITHDRAWAL_TRIAGE_V1',
  name: 'Annuity Withdrawal Triage Rules',
  transactionTypeKey: 'ANNUITY_WITHDRAWAL',
  version: '1.0',
  status: 'active',
  columns: [
    {
      id: 'col_free_corridor',
      fieldName: 'within_free_corridor',
      displayName: 'Within Free Corridor',
      entitySource: 'IDP',
      dataType: 'string',
    },
    {
      id: 'col_policy_status',
      fieldName: 'policy_status',
      displayName: 'Contract Status',
      entitySource: 'Policy',
      dataType: 'string',
    },
    {
      id: 'col_idp_confidence',
      fieldName: 'idp_confidence_avg',
      displayName: 'IDP Confidence',
      entitySource: 'IDP',
      dataType: 'percent',
      unit: '%',
    },
  ],
  rules: [
    {
      id: 'RULE-001',
      order: 1,
      description: 'Low Touch — Within free corridor, active, high confidence',
      conditions: [
        { id: 'c1', columnId: 'col_free_corridor', fieldName: 'within_free_corridor', operator: 'eq', value: 'Yes' },
        { id: 'c2', columnId: 'col_policy_status', fieldName: 'policy_status', operator: 'eq', value: 'Active' },
        { id: 'c3', columnId: 'col_idp_confidence', fieldName: 'idp_confidence_avg', operator: 'gt', value: '95' },
      ],
      outputTouchLevel: 'LOW',
      isDefault: false,
    },
    {
      id: 'RULE-002',
      order: 2,
      description: 'Moderate Touch — Exceeds free corridor, within acceptable range',
      conditions: [
        { id: 'c4', columnId: 'col_free_corridor', fieldName: 'within_free_corridor', operator: 'eq', value: 'No' },
        { id: 'c5', columnId: 'col_policy_status', fieldName: 'policy_status', operator: 'eq', value: 'Active' },
        { id: 'c6', columnId: 'col_idp_confidence', fieldName: 'idp_confidence_avg', operator: 'gt', value: '85' },
      ],
      outputTouchLevel: 'MODERATE',
      isDefault: false,
    },
    {
      id: 'RULE-003',
      order: 3,
      description: 'High Touch — Contract not active',
      conditions: [
        { id: 'c7', columnId: 'col_free_corridor', fieldName: 'within_free_corridor', operator: 'any', value: '' },
        { id: 'c8', columnId: 'col_policy_status', fieldName: 'policy_status', operator: 'neq', value: 'Active' },
        { id: 'c9', columnId: 'col_idp_confidence', fieldName: 'idp_confidence_avg', operator: 'any', value: '' },
      ],
      outputTouchLevel: 'HIGH',
      isDefault: false,
    },
    {
      id: 'RULE-DEFAULT',
      order: 4,
      description: 'Default — All other cases',
      conditions: [],
      outputTouchLevel: 'MODERATE',
      isDefault: true,
    },
  ],
};

// ─── Available Entity Fields for DTBuilder Selector ───────────────────────────
export const ALL_ENTITY_FIELDS: EntityField[] = [
  // IDP Fields
  { fieldName: 'requested_amount', displayName: 'Requested Amount', entitySource: 'IDP', dataType: 'number', unit: '$', description: 'Dollar amount requested on form' },
  { fieldName: 'loan_amount_pct_of_max', displayName: 'Loan Amt % of Max', entitySource: 'IDP', dataType: 'percent', unit: '%', description: 'Requested as % of max available' },
  { fieldName: 'loan_type', displayName: 'Loan Type', entitySource: 'IDP', dataType: 'string', description: 'New Loan or Repayment' },
  { fieldName: 'within_free_corridor', displayName: 'Within Free Corridor', entitySource: 'IDP', dataType: 'string', description: 'Withdrawal within penalty-free amount' },
  { fieldName: 'idp_confidence_avg', displayName: 'IDP Confidence (Avg)', entitySource: 'IDP', dataType: 'percent', unit: '%', description: 'Average extraction confidence score' },
  { fieldName: 'owner_signature', displayName: 'Signature Present', entitySource: 'IDP', dataType: 'string', description: 'Owner signature detected on form' },
  { fieldName: 'tax_withholding_federal', displayName: 'Federal Withholding', entitySource: 'IDP', dataType: 'string', description: 'Federal tax withholding election' },
  // Policy Fields
  { fieldName: 'policy_status', displayName: 'Policy Status', entitySource: 'Policy', dataType: 'string', description: 'Active, Lapsed, Paid-Up, etc.' },
  { fieldName: 'cash_surrender_value', displayName: 'Cash Surrender Value', entitySource: 'Policy', dataType: 'number', unit: '$', description: 'Current CSV as of valuation date' },
  { fieldName: 'existing_loan_balance', displayName: 'Existing Loan Balance', entitySource: 'Policy', dataType: 'string', description: 'None or outstanding principal' },
  { fieldName: 'max_loan_available', displayName: 'Max Loan Available', entitySource: 'Policy', dataType: 'number', unit: '$', description: 'CSV minus loans minus reserve' },
  { fieldName: 'free_withdrawal_amount', displayName: 'Free Withdrawal Avail.', entitySource: 'Policy', dataType: 'number', unit: '$', description: 'Remaining penalty-free withdrawal' },
  { fieldName: 'surrender_charge_rate', displayName: 'Surrender Charge %', entitySource: 'Policy', dataType: 'percent', unit: '%', description: 'Current surrender charge percentage' },
  { fieldName: 'tax_qualification', displayName: 'Tax Qualification', entitySource: 'Policy', dataType: 'string', description: 'Qualified vs non-qualified' },
  // Workflow Fields
  { fieldName: 'channel_source', displayName: 'Channel Source', entitySource: 'Workflow', dataType: 'string', description: 'Portal, Mail/Fax, Call Center, etc.' },
  { fieldName: 'prior_transaction_count', displayName: 'Prior Transaction Count', entitySource: 'Workflow', dataType: 'number', description: 'Number of prior transactions on policy' },
  { fieldName: 'idp_confidence_min', displayName: 'IDP Confidence (Min)', entitySource: 'Workflow', dataType: 'percent', unit: '%', description: 'Lowest field confidence score' },
  { fieldName: 'days_since_last_transaction', displayName: 'Days Since Last Txn', entitySource: 'Workflow', dataType: 'number', description: 'Days since prior transaction' },
];
